language: node_js
node_js:
- 5.12.0
before_install:
- npm i -g npm@5.3.0
install:
- npm install
script:
- npm run lint && npm test && npm run build
sudo: false
deploy:
- provider: s3
  cache_control: private, no-store, no-cache, must-revalidate, max-age=0
  detect_encoding: true
  access_key_id: $AWS_KEY
  secret_access_key: $AWS_SECRET
  bucket: app.topcoder-dev.com
  skip_cleanup: true
  local_dir: dist
  on:
    branch: dev
- provider: s3
  cache_control: private, no-store, no-cache, must-revalidate, max-age=0
  detect_encoding: true
  access_key_id: $QA_AWS_KEY
  secret_access_key: $QA_AWS_SECRET
  bucket: app.topcoder-qa.com
  skip_cleanup: true
  local_dir: dist
  on:
    branch: qa-integration
- provider: s3
  cache_control: private, no-store, no-cache, must-revalidate, max-age=0
  detect_encoding: true
  access_key_id: $MASTER_AWS_KEY
  secret_access_key: $MASTER_AWS_SECRET
  bucket: app.topcoder.com
  skip_cleanup: true
  local_dir: dist
  on:
    branch: master
env:
  matrix:
    - CXX=g++-4.8
  global:
    # DEV_AWS_KEY
    - secure: a5X4QlY2JD/sJnEBkT5WwwfWjYKq3ldRf/+Dh5x2oHB0swGzYyFxzVlezddPF8xDML+CcVoLHkd8WNM2F7qcxHZTDC5spH/ym2gX6YlRwFRTTFBRCJehgYs8Vit/s14f8gkuVV8fe2ubMiV+fpAw80tb3E+t+nCckmXwe8gDqDbHto5VIozTiqDOV/WvkPzaRQofTeNzSqjrAH/iRq8hJUx16shCO2ccdiLu7rnOuys+UwjWFRyjdLP01UZXd5u6a5XK3vigLGPBAqsEwSMgScATJjNIHwYofE5Q3ztD85jz/JoQatQf7LCnQUqkLT+xldMkOZuTlTHvzmVUOl2WYpVxWV9hXwBemvyuRPPtzIrZkKXi6OUgvpYwGgWn8eS1qulB1DYPrUWBtIYGQoxEchfNlmcrCIJ7BrbL9xiNUM8J+ZCWtNS01eSapMHdhAIUMLEsAjxBY+ArLuYAD+URB0d+JZrr9cORGnrGDB+1wI12Z/Qu5LEDp/TMOisK2PXEsaqzlaazr9lj2FXTYJQyyFMMWzq1v1o5lZ5mEJ5ea36eGApV1iQNmPrg7omhDHwKtBpMDFQWZ0Y1SrkIk3QTX6JfzsrehwAhAK2fZ25EaC6zcppAo0ia5/VZoWzxHFQyhkC47hRrM7C6nCriQPDc9kKsmTSX5rp5e/DNpiZ67qM=
    # DEV_AWS_SECRET
    - secure: p+od0xD/9vpMbR2AI6gZWknNAtvvIfq6jXIF98DEsDlqrrMFv4SwtuXLlCmX5PBnB/cWOkwgRhymI7/3+fLrDC+wqlhDEWyzSpVOvAcVAb5LEP7IDen0W8kTj2q9I2VRX+keL7lxQCknAf/21sRZeJfJhLGR+O3NcytEdsjlpFCopA6luZYv1QSd+nRJiTsI7I69T0hr7jZk+YioyjEEp/4qzI2qyJH7E5Ry+DD3gXnC3zva48Huq6rvOtLpgFmio1b1rNAcA55Q9Y3vb1jJyZhKpRvtel9OM9ekTxANEGJVaMzxyZXT7EFTxwxS+ub5c2HRzxedMnD3tY29ku2JJx7Ofm+Yxt9DZXSK7EV99xxE71kIhI9lZFiWZviym08MHGc4pee6+Cl6ZkiV44v4XnwbgUq8GCOkmDMQBQtGhXq7dC6jB/r7P7CJs+DIGDF7qNt/xizVOC1THS8GUCN68aWMVperP+IlUXo5d2XekhO6vjHk6o44K8A1s7yblBWXj54B6NfJnBzUK2X0g6Y2xdW6tmoKtad1r1I3062skc+UiU+6m4fGS8pLFElJNj+8N7QANoEw9oJDZfuQ47uVQzPjAA1/qdcy3ksMek0siNFbpZnMqzOJTPf2Xe7YgKuCPg0QczESXIjOeEIU0om7SWmGEIuMFqt6obQW0M3VHn0=
    # QA_AWS_KEY
    - secure: XG8fvQkBGUSbrZ+ZcHJadpPGKze1HrO17pl9WAzXOAFaomgZpXJIQrEmH8H03QpeFwhhM0pmWeHwnLAzSQ3j8dU8RidlR5/72X9Jdz74YJNPun7O4EJ4LE4qd3bjsS1+0IhyoaatV9OvIbCJDm1ujpHATkvUwHqt2WvVKxmy76raYqzMBNJD0xq0JrceZWwy2i0mnxLNSe/PqGREPDVWIFjb/rgLo0k2NPH7Z/ZqzTN9F/HzT7b4qmEJaQsjgBwWnMDIYdFKIVhP4nUlQBhZhuiiirUh7STOxloxe245xu2FRr+m5la2Eqpw8yf+nwsevtgnk1SaWF9LVp2VOV6AONWI5fMC/PGlEoVKf/Wt+S39wxlsIG4RL8RH0I9IypxHyfWcKz/iBVKWwpEH+IGa9Pl2XnCDJs5xHBkaVKuX76Nk8NSEG/ZxkCLBhlDSMmiivw4dQShQQv/qto1nz8rVzhj2gZUJbynsfKId2x/VrcnaPVRMSHuTRI/112wzLfENpcy1WhOJrKHZjMuoUVOLYNZs/kqygNTjqUbiqBb1t2RRuULB7RjBFMJBJKFbQA6wha1Ieh0lut3ZWbXPFkpsGCfC7S3l6Iy6U4BQcFpRDGw8MiAI+y5IPzePgKwhWxKZl0nY34trdzK4KaCabvdORYviSaBbxGiXPVsja/SY3T8=
    # QA_AWS_SECRET
    - secure: ALKnhODYCEtEjaDKe7YCupZPr7krQpLHkhlumUPkZVdYvNbunNDQcSDIJAEx97W9PJ0jRLQzYgoosQ+49CKOi7Lv2K+GHszBtiJ7Mc689v+lkQ686pSrGTrnTV626wLT6fxtprrFofTF8Q7Ywpp8q5A6vmTOpUFIkFBzlfEoInmvSXtM3BFTg11OFQdyhP1Pv2vSdDjFvbulCBhFo1sw8f1pRlUxALaYTE1ar1kN2EysrS5VSuK7ZdyXrmleJCwnIFshECqNUpHPU7LwYxeoTlaFGdeMFK5TuqrxR/LC6lSWTQvhMtQJzMFh8W2FwNJNqPNFmttD7G86/6o6jNxW4E0xo35VINaPi3qPdlHXFLBxMjkRzVS+I2EUjb80Hft5gK1/JXBl0RqX38sqgVGb1/u63hPR0iNqLW9CPEXXxrdifLrex+x3hW2Shg8kzGwRdE181zgdIIhnV8JiD1lsO1XrpusCjia+QjZJKp+fglq/1KGGRqHllxTN0T+6E9V8O4Opy+59aWcO8nkIJ5+INRl67MhpgJmutAfF2lgd5hMAWju5GNA77Bfd31zwpbOdetwmyp2fo81iKs1rgK4M9rFTtKsRFObDnalEqP+mwmwAg0yzhmWAMpmegYDAGfHOBPLSHpFDPRW7lrI4HTMrW2zP2W/NCIwHWpqPM/82bnc=
    # MASTER_AWS_KEY
    - secure: natX9uNNhOZBAkVht/f/dxT2Rkv/EP4maS3h9/dRXqejEHO9YQCTnvApGFE1SkDuH+NHoH06yx7RpAh+Gswn8CldHPF3daVnJHVgZYU2gBTyxlc5hFFV3ZmZ+hFSZgzWAXRSedw3l/SD7ceo8RebeVpSH/weDxzmHHSb429f0809wM+gWeUsNAG1sAr/oKw1t++7xIZA9p9k7EpCy8oBpHNRB30vknORNY/VFZMbp/RHfJohiL8SM9Nub2rnh27LKxik32BDCNypm+wE1cMB8642wL+MysIN7b1b1PJ9Hkahzcym8tImY0zJrui/j7tZ2ho0ATaHIc4DHna3TeM/tIK56Rtb+w4/b5rZrtIGCqCDoo6MQMkh1jL45KKeoa9Q5OgdgKqRgOQIkhy9MPQyqayUi/6RTplYXt1MO0vpHKUD2yMDZSfXWfin0XnHywTKAjjdc/lyvvC7YtrucbUu3DSbY6Eq5DH9przWdHWtXQDA0+hNjjxa6M8w2hPYBqOSM5GHF1VjlwY15hDLx/oua1VyGSfe7msd6xo0gkA/lvbA4QrOcuPYduF0cOvXuzj/RsaVqcHOAzRHvyKHaQR2UmmEQH7JoKr0/0mjXTNZX/xPlGtqRBDiWajfHhIjG4RlApbGTcdFUiuMrTNp0USA3QyV72yljWvkZ4L/9PbDjq8=
    # MASTER_AWS_SECRET
    - secure: fO89NVR5/+qbWD0tcHOftkGGSCa89vrYeH+UJ4zaE9kgos2W7QpIsc/ENt9NscuBOERBsrlOCzS+mBBC1ss40/GxIQbM8xS9b6y8odJqEKDCR34YDWcPEmb/kSbC0Cb7Q6r6r8fbJ0GFBOunYgiGFaGyPLlhVd68NBH2YzzRZ5R24KU7T1/3mFUz50DO/q+6NU56WurkrqTIes6YT3UNAPaXDaHJHtTifts+TibP6NpAsTDcj38gBH4re6+5MkI/iPUAaN7iA+aooDtHsKNWI0iCTyyBORfzNbCd0Nbbqv6GH/3v9RlZXg05+uOWOxjPLSH8TK3aQfGZD9uf1NmZRsNkLVVYMjUHAAZU3g0k8fxXMUtkL0nqbIoi9FTAMdHzc3aHQlU41DPbS7YV+Cs9Y2aHOx+kX1eqber6g0PUSrDSGmdFDlJqJrabHXomgRZxJ/uPyZ/JzGZQDYZxqWuhmtap79uGJOe/OKa1Oubj8wfwH3BIA1IFbLS2I5wAN5UOb0eQkTQTXS8LVtO2VicbX9YdZF1cE5uCpK1cXCv6+cNhziTXIrRFp7W/cYPMN7eZoQNxRgGfTSY+yNCKR3Qh+S8Ota8lZoB60wiPb6ISPIXbO0AwTtRHjrTUsPEfxsQPLZT4AZkYgjGbMEkzuhDVh3vR1gpQ67L8hPbNPAwh0ts=
    # FILE_PICKER_API_KEY_DEV
    - secure: fVdZpmN9nrmyAFHl7/Tn4Lpf281Wk3AYJ6mWg4kUOOsK4kQ18KCmgJN8RkOcd5VU4a1pwQloND3dcL4DQ4LKdQ2CZ3fCskejoejXuwlwRQ80YdvE0ZPVIqtx2jNJw8fRe5DWnHEfb8COHjjTv4qcI/As0Cg9SQByq6+K6IhHFgbge6vaBV5V8xTG0Ib11N6DFjB1EbzHIIjhEUcz9VHFpfuKqVvqzFunlgL32bq0rqpbialPO79nVwVwrVoiwAI9Vei9VGX8DLr71lNORQfmNjQr1bCyOKpMcE0ole446Gl7zefy96G3lbpHJTIPPzYD9WlVzDGbprrpNDdqwuBC4Hsa8VU3eTM66ULcHw/BPj4wnYpIkJBOih8nxBWYuVdY5+6TrGRmKxPcGheCQukeXZmpXqunCbjorWY/udJVAOjSOYIiAC/QLDDiART48WSwtc2oChHMb72IoMzVuiucx4Br3HfGd5r1Qf/4GceeS+UlyiY700C6MHIXcAm4v5IiomHOqpy/5lFYjgOGfnzh2s0sjScE3b8iBvW8kTMNFNz9xZSe3c2upJiD4AZXowwCWtRQl5lT0o7yzd34I6Fet0+hwidv+D9XaCVnmm/x1eYAmuUSZarqLvslhTx3tMz/o7DmFodWnEIyHBD9hDNPqZpIHBWvCAt6L2QezfkJXBg=
    # FILE_PICKER_API_KEY_QA
    - secure: j4Ng6KJAuUcHXAbNA6zSTO7rl43a0lTbTnaikR2KhUXChLasB5z8ucPIRj4jy9pVlBkmuEL3JTwKDi6ulLczQacpPY5v3YpAVWfauU5Ur92cR8dbLXfuCD+U8XitNUlz/ORkzJhJcv8Vrcw1aYIVKjQ4IRgSmSDNepBBnwUplIWmY6JRHVsCG2EFJ1l7QroK30exfyd+rzSzbs98B83ktz6Au0QgvI52UNIxMfKTq/H6ogx+BSpSKWDf/BfUmk9DPOq7FnsrBqbRITetWOQAzyxxnaKMkV6sQwMpV/46Bc2sP8043urXIqXXPteqGl1ydbn5ahScotdlgswxbZfq2CcxeplnXCj87ki41jEIW8kZQuRvFozr0bRzKSoj7G0LLUt5JO+O0ssaZ+31uLR2Y/XaG5vzHtcj9HK15mr6wSQDr72zypzFbVaoanTRH/JZBtVfLgnQkaLHKa25PZN5WihRCqA6JbQ1XNU3JruzY9BiDiw9YqiroGhOaYemwL6AseqB0JwLHMo/NbxQhSOT1V6XInGFO+oght0pOWvpLw1PiWrWPly87gtFbS8pS58R0Ny3sDKncoZQXYVcQqXIN/cjFN/WB/dFtldBLHMBChQhngIJ+6RE0sPGlRKnzCqs3S5PEdVqm7AXACZQZg9GJ8Hw962lIiNfcp9apZvQB7Y=
    # FILE_PICKER_API_KEY_PROD
    - secure: B0EvAEy5AMjtGrYfgxP4z6Cg6kMbCWPuYW1H9I89Tg6im+In/01hR6nozCBYdqcqs2cDYCrqHNHY0RS3EovfQ8sw9DpjHEfvooFJWccicAnN2gGTl/O5398/IbBMGLJWInyni0OueTaw+OefYC9L0fNL9u8IH25nMNtC2bL5uO2UnZWBwaUk8B0Ce/V7bds8TgQlVkSiqS99wtseFSSO1jtMkAbUo+JDWMuABr0zqe6P5uxV19nfc48EXNWPgsT76n2C34b9kZW0N9M2Z3knSmD4N+b38BOAUbY5WMt8zgVXvylCKq/2JxuwuWMQeyDA1N66zhBkR+wPNc8zxhwWThGO4CduZE9xiCymVipDUJ9uDMHcGqQd7GBC3jdGwUuGq4PQGuFx1NnpgDRY4boZaHa7BtegDMffDsTeHKmgWNbbECizGzfJZzZTuZlQLjrYyTUfcw5bEsZDCfoX0+ERUwZhDYua5cQD2L4CReSbXM06lR3aicdNqcgOlVTG0WIdEkCIb4SvdpdAGuuJBFiSrvHsEmjQEyefSSOfwLz1ecukh47B+x1iNT/WkDy1LTmExZlLjyhyOxbyNfFoI2DnvY8zJ4P+myyF+K5yxzlB2z1RvLuoGGbOFLNtirV5si38+Ns+3dwY1uuSen5/PjWwGbxy5rjHdDF5oFUonjdgdWo=
    # AUTH0_CLIENT_ID_DEV
    - secure: cac8BZoSf6CpiP93GI4rseanLpMAxKf3E86D1WiM2K2Zd/hMTOQkSjLb/1GL3tz5lEeY3F8fFnXXskAf6XdZv/KJmLOaSOpTlqc+gYkHZtuxq64UC0B1N9sDikIzIpPZIBitgEVXOurLoUKi6MFxFrNyEyGgvzSo75BtsPAJv0zHu4JTclQ+ZNo+utJ+YyuSCZoi/yQEn9LtAic2u9u6QmglS6wOzdacGRALiZkPbE0luT/mEs2+g6i71iCzC0oW8LoIdvi5dup58Egf5Gyall+dzkPGOSKhZfDzJvg1/I67OfmtkhB2h4HA8/koReh+hMvQYmbSy32biLz6nHeHACw8l1f85r3lazgUwKU7qFf3Vi7Y1YgCAqWjMGioTEiw0Y9JJocrJOUgQtK/f6tUG9ahKYH+IDj3i1Al4BkI2kJuAqlPMbQSxKNCv16Q3aSyUoD0yu8+h6lMZC8ot+5wwo6eUbBnkhcE7nbT+RVHlg8kIigg87iQ7D5UCxX3cmTuzbXQjrsWgU6vG/nah17vN8WfME7BA2M8+hBcB+383bOqdcuKeDzMg2p1XAkm/DchTKmx+fBpQg+Hl4g6EoKPbw2M0/vcv+hBmYbScchDRP0w+PNZ4o3LPqTUMpWIwdg1hckE3RMxORyW7/F0Fm7BiCCb3ewo9vV3azcf5WhUvUQ=
    # AUTH0_CLIENT_ID_QA
    - secure: XXsRhXWQtvN3gGPPb53xmOieKXVgroRbzSSimnzD+yjgOTwh9YnMML+5iqo5N/ZcBXOHLjXSBEXkzUEsR5+6EOjXxZCJcRBH9PJpC10UKYjMxgySQRzVJwpoaw2PKSORvB/znkQEsL7jsA5LcmnDmkiX5DGg93AWf4bnKgmWghHJxr97dJxzyz/BfGl7MocdR3MZsCRZlV9cP0t29+1KqIX8JP1MzAOj0DzgjM3zrOVOfCuzBRLKD4HzVT/MryEP247yDbR674NaSirPrJASsrj7JSbMnFxbFOsL4THd84L97T592+6gL0WEenyrwUz2eO9YzcOi4EP/7Gy9W/aogE6qS2pgvk6iPW5DrpTjClzsppTWPLgEoQ+ZjHUKuR+F51JPAP7I5hlIGfLMm2ij1qFFLfYuWfEO22Pcquj5rDfkFhRWejGJpXe8Q6EAT+EoJLBWYCLMkv8VT9Yejn59NFt4FhujIGiEC8y/J2rHk8g/E2nUDLM/P3SQIAD3revA4pumc1nnNCOc2ZG3LIPjU5uaFS6XyOL6E6Lm+HxJzZUeBymnVM++HeEhnYwKmIhKOt16C21DLrDEkS8qsn3ro2H355s0fkN2/MVFFuTKJg64HnC+F4vkNgNrmw3MGRkWutUv/+h5iFdWjMPTMmINQDiIJl5x1fE8hfC/ON2OKIk=
    # AUTH0_CLIENT_ID_PROD
    - secure: QadnSMoqJfliqPrqVg8o7E/XTzKQZs9sfZ388xOrmokYrJD8dBKgmCcvnUftJkoSIUYXoCpS7PmqLbqyM3hRc/Zoa8gO5G6QmHGNKK2BMXnOoNtbI7xOEyZs9OXxuqP2tL8D5uGNfsGOFv4ncJm6LNFnmivW/vAv5G7j8vh7uCeSnhecEaAoWvvs/a/73208UTI8W/vCRn4zcXr9H5DBsY1zvbewP56PD8PL1NpXmCp6JzJLfTTYoitOPOolgR/nmIELV/Gts721GlC59F3OGAioLIIH1VezaXZQ4dy2Rtrtheq2TKeHmN2zwCaHQypIwUd5z/VL06+iPe5XX8wUbhkwZ7dF66ziz14/AEEkq7oF6q4p6VJlfrmjYy5YQJdAJTki+XsFXolGfuErEGwl2Yz8qECcsvtLh/D1g7SHU3Z0sLTVyZCpK9ReyQgKZuGEbekZ6jT8f2/Qr29n7NChpAsx/njIrCthW6ku3BNbkYzT/opVkcawXwTlHTvqqSRo1NPW1Ecyq59NI/4CNk/HOjpqIylMK+bqFXAvDCJ+fA/92i0f0UD+iTNO2eI08fX6LRm6eKM2A2lSaWWYt0nD186QqbN1+pQONnEsvmM+LQX/J1dHuMboU0eA7my/jF1YnbZHAsilIfpKdfyKQu0QAP3ygMKVA9ds13pf8yIWtyE=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
notifications:
  slack:
    secure: PMGlpdBoRzMlIjCsPWdXJ1wf550b+mpX0x44ggGWNL7ErpNebfyqIbXf4VJXYQDmhVJt31ygDaxTtj8XwZJlbvQjE6WGHU26KvL/efGJJL5EmgFD8LDBFpsbn49PyoZuVOTbSzqP8d8WCCPo4oBvX2r2Q2Ixh/tUx7i4Bcv0XwNpWAR75v1Yq/NftEI48k2GcI3oHqmuEgLHdP93k1rCUM4sBsgkr4PCltZfoE2AWlF6wY59w/oFiKj4FwycY8QjJZa/zbSQq1B/9QD7n4YBY4QjVv3LmjshEiQv1HGo2rNLV+/BB5ZoQ6JEH9h+seduHNTF+mkToKbJ2YjDERLlqLFYWVQKXTqFkSdYuknguJ3uOfXFaGtPDSqTRljE6WW6UDIJi9lDpxFHjH2q848/2O03RKtYeFKJWNbVb7Q2PWTBFxx6OurYra+tbUAorQiYmAQxd0vJY+qzGIDJZIQ8yDE4C10heOhfRyU8wJSKF3xJUKKWVGfBuHivFBZOETFSg0uVBcJnsXRcErvEQz0LuKaZfP81bIokcKUGxum/xyp9mYhYqWDvIj31RUhDMiRxXTPe9PhW0mlOtRG7tm2+8G08exHPSfONSV2IPUtlQt4j2/+I22ncOwtsm6yZzXXbDjoMR2sCHIyJj3lVECOqAnCfNJ6Q0CNJ93LqxKSHdFU=
